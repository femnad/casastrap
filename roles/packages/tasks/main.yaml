---
- name: Install packages with apt
  apt: name={{ item }} state=latest update_cache={{ update_cache }}
  with_items:
    "{{ _deps.apt }}"
  when: ansible_os_family == "Debian"
  become: yes
  tags: reqs, reqs-apt
- name: Install packages with dnf
  dnf: name={{ item }} state=latest
  with_items:
    "{{ _deps.dnf_yum }}"
  when: ansible_distribution == "Fedora"
  become: yes
  tags: reqs, reqs-dnf
- name: Install packages with pkg
  pkgng: name={{ item }} state=present
  with_items:
    "{{ _deps.pkg }}"
  when: ansible_distribution == "FreeBSD"
  become: yes
  tags: reqs, reqs-pkg
- name: Install packages with portage
  portage: name={{ item }} state=present
  with_items:
    "{{ _deps.portage }}"
  when: ansible_distribution == "Gentoo"
  become: yes
  tags: reqs, reqs-portage
- name: Install packages with yum
  yum: name={{ item }} state=latest
  with_items:
    "{{ _deps.dnf_yum }}"
  when: ansible_os_family == "RedHat" and ansible_distribution != "Fedora"
  become: yes
  tags: reqs, reqs-yum
