---
- name: Create release store path
  file: path={{ release_store_path }} state=directory
  tags: download-release, extract-release
- name: Download and extract the release
  unarchive: src={{ release.url }} dest={{ release_store_path }} copy=no
  tags: download-release, extract-release
- name: Locate the extraction directory
  find: path={{ release_store_path }} patterns="{{ release.name }}*" file_type="directory"
  register: extract_path
  tags: build, make, install
- name: Check whether only a single extraction directory was located
  assert: { that: " {{ extract_path.matched == 1 }} " }
- name: Set source variable
  set_fact:
    source:
      path:
        "{{ extract_path.files[0].path }}"
      name:
        "{{ release.name }}"
  tags: build, make, install
